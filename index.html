<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>A Private Letter ‚Äî Elfrida</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Indie+Flower&family=Itim&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --ghibli-green: #84a59d; 
            --ghibli-brown: #5d4037; 
            --ghibli-cream: #fdf5e6;
        }

        * { -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; box-sizing: border-box; }
        
        body { 
            background: var(--ghibli-cream); 
            color: var(--ghibli-brown); 
            font-family: 'Gaegu', cursive; 
            margin: 0; 
            overflow-x: hidden;
        }

        /* PRIVACY - Layar Hitam saat keluar tab (Tanpa Blur agar Totoro tetap tajam) */
        body.protected { filter: brightness(0); pointer-events: none; }

        /* MAIN BACKGROUND - Kualitas Tinggi & Tajam */
        .ghibli-bg {
            position: fixed; inset: 0; z-index: -5;
            background-image: url('https://images.wallpapersden.com/image/download/my-neighbor-totoro-art_a2puZ2mUmZqaraWkpJRmbmdlrWZlbWU.jpg');
            background-size: cover;
            background-position: center;
            opacity: 1; /* Full opacity agar tajam */
        }

        /* LOGIN SCREEN - Tema Totoro Sketsa */
        #login-screen {
            position: fixed; inset: 0; z-index: 9999; display: flex; align-items: center; justify-content: center;
            background: #a8dadc;
            background-image: url('https://w0.peakpx.com/wallpaper/528/70/HD-wallpaper-totoro-landscape-studio-ghibli.jpg');
            background-size: cover;
            background-position: center;
            transition: 1.5s cubic-bezier(0.8, 0, 0.2, 1);
        }

        .totoro-char {
            position: absolute; width: 150px; animation: floatGhibli 5s ease-in-out infinite; filter: drop-shadow(5px 5px 10px rgba(0,0,0,0.2));
        }
        @keyframes floatGhibli { 0%, 100% { transform: translateY(0) rotate(-2deg); } 50% { transform: translateY(-30px) rotate(3deg); } }

        .login-box {
            position: relative; width: 340px; padding: 45px 35px; 
            background: rgba(255, 255, 255, 0.92); border: 4px solid var(--ghibli-brown); 
            border-radius: 60px 20px 60px 20px; text-align: center; z-index: 10;
            box-shadow: 15px 15px 0px var(--ghibli-green);
        }

        .login-box h1 { font-size: 2.3rem; color: var(--ghibli-brown); margin-bottom: 25px; line-height: 1; font-weight: 700; }

        .input-wrap { position: relative; margin-bottom: 15px; }
        .input-wrap span { position: absolute; left: 15px; top: 12px; font-size: 20px; }
        
        input {
            width: 100%; background: #fff; border: 2.5px solid var(--ghibli-brown);
            padding: 12px 12px 12px 45px; color: var(--ghibli-brown); font-size: 16px; 
            border-radius: 20px; outline: none; font-family: 'Itim', cursive;
        }

        .login-btn {
            width: 70px; height: 70px; margin: 20px auto 0; background: #ffb703;
            border-radius: 50%; display: flex; align-items: center; justify-content: center; 
            cursor: pointer; border: 3px solid var(--ghibli-brown); transition: 0.3s;
            box-shadow: 0 5px 0 var(--ghibli-brown);
        }
        .login-btn:active { transform: translateY(4px); box-shadow: 0 0 0; }

        /* WEATHER STORYBOARD */
        .weather-card {
            background: rgba(255, 255, 255, 0.85); border: 3px solid var(--ghibli-brown);
            border-radius: 30px; padding: 20px; margin: 30px 0; text-align: left;
            box-shadow: 8px 8px 0px rgba(0,0,0,0.05);
        }

        /* MAIN CONTENT */
        #main-content { opacity: 0; transition: 2s ease; height: 100vh; overflow-y: auto; scroll-behavior: smooth; }
        body.unlocked #main-content { opacity: 1; }

        /* STORY PARAGRAPHS */
        .reveal-p { 
            opacity: 0; transform: translateY(30px); transition: 1.5s ease; 
            margin-bottom: 6rem; position: relative; padding: 30px;
            background: rgba(255, 255, 255, 0.8); border-radius: 25px;
            font-size: 1.4rem; border: 2px solid var(--ghibli-brown);
            box-shadow: 10px 10px 20px rgba(0,0,0,0.05);
        }
        .reveal-p.active { opacity: 1; transform: translateY(0); }

        .pull-rope {
            position: absolute; right: -25px; top: 45%; width: 50px; height: 50px;
            background: url('https://cdn-icons-png.flaticon.com/512/1041/1041916.png') no-repeat center;
            background-size: contain; cursor: pointer; animation: swing 2.5s infinite;
        }
        @keyframes swing { 0%, 100% { transform: rotate(-12deg); } 50% { transform: rotate(12deg); } }

        /* PHOTO POLAROID */
        #photo-frame {
            position: relative; background: white; padding: 15px 15px 70px 15px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2); transform: rotate(-3deg);
            filter: brightness(0.1) sepia(1); transition: 2.5s ease;
            border: 1px solid #ccc; margin: 0 auto; max-width: 340px;
        }
        #photo-frame.lit { filter: brightness(1) sepia(0); }
        
        .lamp-switch {
            position: absolute; right: -60px; top: 40%; cursor: pointer; z-index: 50;
            text-align: center; animation: bounceX 2s infinite;
        }
        @keyframes bounceX { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(10px); } }

        /* DECORATIONS */
        .rain { position: fixed; background: #a2d2ff; width: 2px; height: 20px; z-index: -1; animation: fall linear infinite; opacity: 0.6; }
        @keyframes fall { to { transform: translateY(110vh); } }
        .flower { position: fixed; pointer-events: none; z-index: 1001; animation: bloom 3s forwards; }
        @keyframes bloom { 0% { transform: scale(0); opacity: 0; } 50% { opacity: 1; } 100% { transform: translateY(-150px) rotate(360deg); opacity: 0; } }
    </style>
</head>
<body oncontextmenu="return false">

    <div id="login-screen">
        <img src="https://www.pngplay.com/wp-content/uploads/12/My-Neighbor-Totoro-PNG-Clipart-Background.png" class="totoro-char" style="top:5%; left:5%; width: 180px;">
        <img src="https://assets.stickpng.com/images/584c305a1fc21103bb375ea0.png" class="totoro-char" style="bottom:5%; right:5%; animation-delay: 2s; width: 140px;">
        
        <div class="login-box">
            <h1 class="f-serif">Welcome,<br>Virya Rahmawati</h1>
            <p style="font-size: 14px; margin-bottom: 20px; opacity: 0.7;">"A journey to the forest of heart"</p>
            
            <div class="input-wrap">
                <span>üçÉ</span>
                <input type="text" id="username" placeholder="Siapa namamu?">
            </div>
            <div class="input-wrap">
                <span>üîë</span>
                <input type="password" id="password" placeholder="Sandi Rahasia">
            </div>
            
            <div class="login-btn" onclick="validateLogin()">
                <img src="https://cdn-icons-png.flaticon.com/512/826/826908.png" width="40">
            </div>
        </div>
    </div>

    <div id="main-content">
        <div class="ghibli-bg"></div>
        <div id="rain-layer"></div>

        <div class="fixed top-6 left-6 z-[100] bg-white/90 border-2 border-amber-900 px-5 py-2 rounded-full shadow-lg font-bold text-amber-900" id="clock">
            00:00:00
        </div>

        <div class="fixed top-6 right-6 z-[100] flex flex-col items-center gap-2">
            <button class="w-14 h-14 bg-white rounded-full border-2 border-amber-900 shadow-xl flex items-center justify-center text-2xl" onclick="triggerLove(event)">
                üçÇ
            </button>
            <div id="love-msg" class="opacity-0 font-bold text-red-600 bg-white/90 px-3 py-1 rounded-lg text-xs transition-all">Love You!</div>
        </div>

        <main class="max-w-[480px] mx-auto px-6 py-24 text-center relative z-10">
            <header class="mb-14">
                <img src="https://assets.stickpng.com/images/584c30651fc21103bb375ea1.png" class="w-32 mx-auto mb-6">
                <h1 class="f-serif text-5xl text-amber-950 italic">Untuk Elfrida</h1>
                <p class="text-xs tracking-[5px] font-bold text-amber-900 mt-4 opacity-60">CHAPTER ONE: THE GIFT</p>

                <div class="weather-card">
                    <div class="flex justify-between items-center px-2">
                        <div>
                            <p class="text-[10px] font-bold text-amber-800 tracking-widest uppercase">Kabar Langit</p>
                            <p id="loc-text" class="text-xl font-bold">Hutan Totoro</p>
                        </div>
                        <div class="text-5xl font-light text-amber-900" id="main-temp">--¬∞</div>
                    </div>
                    <div class="flex overflow-x-auto gap-5 mt-4 pb-2 scrollbar-hide" id="hourly-list"></div>
                </div>
            </header>

            <div class="relative mb-28">
                <div id="switch" class="lamp-switch" onclick="ignitePhoto()">
                    <div class="bg-yellow-400 p-4 rounded-full border-2 border-amber-900 shadow-2xl text-2xl">üí°</div>
                    <p class="text-[10px] font-bold mt-2 uppercase tracking-tighter">Buka Cahaya</p>
                </div>
                <div id="photo-frame">
                    <img src="PXL_20250805_071541629.PORTRAITbb.jpg" class="w-full h-auto" onerror="this.src='https://via.placeholder.com/350x450?text=Foto+Cantik+Elfrida'">
                    <div id="firefly-box" class="absolute inset-0 pointer-events-none"></div>
                </div>
            </div>

            <div class="text-left space-y-20">
                <div class="reveal-p active">
                    <span class="text-3xl font-bold text-amber-900">‚Äú</span>
                    Terima kasih banyak ya, sudah bersedia menerima hadiah kecil dariku. Aku tahu kehadirannya mungkin terasa mengagetkan, sampai-sampai kamu belum berani membukanya...
                    <span class="pull-rope" onclick="revealNext(this)"></span>
                </div>

                <div class="reveal-p">
                    Namun ketahuilah, hijab itu kupilihkan dengan seluruh doa agar ia bisa menjagamu, sebagaimana aku ingin selalu menjagamu. Cobalah pakai mahkota indah itu, dandanlah yang cantik untukku.
                    <span class="pull-rope" onclick="revealNext(this)"></span>
                </div>

                <div class="f-serif text-3xl text-amber-950 py-14 border-y-4 border-double border-amber-900/20 text-center italic reveal-p">
                    "Sebab bagiku, kamu bukan sekadar pilihan, melainkan sebuah ketetapan yang ingin aku syukuri seumur hidupku."
                    <span class="pull-rope" onclick="revealNext(this)"></span>
                </div>

                <div class="reveal-p">
                    Aku ingin melihat bagaimana dunia menjadi lebih indah dalam satu bingkai foto darimu. Nanti, kirimkan fotonya padaku ya jika jilbabnya sudah kamu pakai. Biarkan aku menyimpan satu kenangan betapa sempurnanya kamu di sana.
                    <span class="pull-rope" onclick="revealNext(this)"></span>
                </div>

                <div class="reveal-p">
                    Aku paham bahwa perjalanan kita mungkin tidak akan selalu lurus dan mudah. Namun bagiku, setiap lika-liku bersamamu adalah bagian dari cerita yang tak ingin aku lewatkan. Aku ingin menjadi rumah tempatmu pulang.
                    <span class="text-3xl font-bold text-amber-900 block text-right">‚Äù</span>
                </div>
            </div>

            <footer class="mt-40 pb-24">
                <div class="text-2xl font-bold text-amber-900 mb-1" id="footer-temp">--¬∞C</div>
                <div id="current-date" class="text-xs font-bold text-amber-800 opacity-50 mb-10"></div>
                <p class="text-3xl tracking-[8px] text-amber-950 uppercase font-bold">Himam Aby Maulana</p>
                <div class="w-16 h-1 bg-amber-900 mx-auto mt-4"></div>
            </footer>
        </main>
    </div>

    <audio id="player" src="Ed Sheeran - Perfect.mp3" loop></audio>

    <script>
        // PRIVACY LOCK
        window.addEventListener('blur', () => document.body.classList.add('protected'));
        window.addEventListener('focus', () => document.body.classList.remove('protected'));

        function validateLogin() {
            const pass = document.getElementById('password').value;
            if (pass.toUpperCase() === "FLAFOUR") {
                document.body.classList.add('unlocked');
                document.getElementById('login-screen').style.transform = 'translateY(-100%)';
                document.getElementById('player').play();
                getWeather();
                startGhibliFX();
            } else {
                alert("Sandi salah, coba ingat lagi..");
            }
        }

        function startGhibliFX() {
            // Soft Ghibli Rain
            setInterval(() => {
                const d = document.createElement('div');
                d.className = 'rain';
                d.style.left = Math.random() * 100 + 'vw';
                d.style.animationDuration = (Math.random() * 0.8 + 0.6) + 's';
                document.getElementById('rain-layer').appendChild(d);
                setTimeout(() => d.remove(), 1200);
            }, 300);
        }

        function revealNext(rope) {
            const current = rope.parentElement;
            const next = current.nextElementSibling;
            rope.style.display = 'none';
            if(next && next.classList.contains('reveal-p')) {
                next.classList.add('active');
                next.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        function ignitePhoto() {
            document.getElementById('switch').style.display = 'none';
            document.getElementById('photo-frame').classList.add('lit');
            // Ghibli Fireflies
            for(let i=0; i<20; i++) {
                const f = document.createElement('div');
                f.style.cssText = `position:absolute; width:5px; height:5px; background:#fff176; border-radius:50%; left:${Math.random()*100}%; top:${Math.random()*100}%; box-shadow:0 0 15px #ff0; animation: floatGhibli ${3+Math.random()*2}s infinite; opacity:0.8;`;
                document.getElementById('firefly-box').appendChild(f);
            }
        }

        async function getWeather() {
            navigator.geolocation.getCurrentPosition(async (pos) => {
                const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&hourly=temperature_2m&current_weather=true&timezone=auto`);
                const data = await res.json();
                const temp = Math.round(data.current_weather.temperature);
                document.getElementById('main-temp').innerText = temp + '¬∞';
                document.getElementById('footer-temp').innerText = temp + '¬∞C';
                
                let html = '';
                for(let i=0; i<10; i++) {
                    html += `<div class="text-center min-w-[50px]"><div class="text-[10px] opacity-60">${i*2}.00</div><div class="text-sm font-bold">${Math.round(data.hourly.temperature_2m[i*2])}¬∞</div></div>`;
                }
                document.getElementById('hourly-list').innerHTML = html;
            });
        }

        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString('en-GB');
            document.getElementById('current-date').innerText = new Date().toLocaleDateString('id-ID', {weekday:'long', day:'numeric', month:'long', year:'numeric'});
        }, 1000);

        function triggerLove(e) {
            const icons = ['üçÇ', 'üçÉ', 'üå∏', '‚ú®'];
            for(let i=0; i<8; i++) {
                const f = document.createElement('div');
                f.className = 'flower';
                f.innerText = icons[Math.floor(Math.random()*icons.length)];
                f.style.left = e.clientX + (Math.random()*60-30) + 'px';
                f.style.top = e.clientY + 'px';
                f.style.fontSize = (Math.random()*20+15)+'px';
                document.body.appendChild(f);
                setTimeout(() => f.remove(), 3000);
            }
            const msg = document.getElementById('love-msg');
            msg.style.opacity = "1";
            setTimeout(() => msg.style.opacity = "0", 2500);
        }
    </script>
</body>
</html>
