<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>A Private Letter ‚Äî Elfrida</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@300;400;700&family=Itim&family=Cormorant+Garamond:italic,wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root { --ghibli-green: #84a59d; --ghibli-sand: #f5ebe0; --ghibli-brown: #6d4c41; }
        
        * { -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; box-sizing: border-box; }
        
        body { 
            background: var(--ghibli-sand); 
            color: var(--ghibli-brown); 
            font-family: 'Gaegu', cursive; 
            margin: 0; 
            overflow-x: hidden;
            transition: filter 0.4s ease;
        }

        /* PERLINDUNGAN PRIVASI (Hanya Hitam, Tanpa Blur agar Totoro tetap cantik) */
        body.protected { filter: brightness(0); pointer-events: none; }

        /* --- STUDIO GHIBLI BACKGROUND --- */
        .ghibli-bg {
            position: fixed; inset: 0; z-index: -5;
            background-image: url('https://w0.peakpx.com/wallpaper/434/938/HD-wallpaper-studio-ghibli-background-drawing-art-scenery.jpg');
            background-size: cover;
            background-position: center;
            opacity: 0.6;
        }

        /* --- LOGIN SCREEN (TOTORO THEME) --- */
        #login-screen {
            position: fixed; inset: 0; z-index: 9999; display: flex; align-items: center; justify-content: center;
            background: #a8dadc;
            background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
            transition: 1.5s ease-in-out;
        }

        .totoro-float {
            position: absolute; width: 120px; animation: float 6s ease-in-out infinite; opacity: 0.8;
        }

        @keyframes float { 0%, 100% { transform: translateY(0) rotate(0); } 50% { transform: translateY(-20px) rotate(5deg); } }

        .login-box {
            position: relative; width: 340px; padding: 40px; 
            background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(5px);
            border: 3px solid var(--ghibli-brown); border-radius: 40px 10px 40px 10px;
            text-align: center; box-shadow: 15px 15px 0px var(--ghibli-green);
        }

        .login-box h1 { font-family: 'Gaegu', cursive; font-size: 2.5rem; color: var(--ghibli-brown); margin-bottom: 5px; }

        input {
            width: 100%; background: #fff; border: 2px solid var(--ghibli-green);
            padding: 10px; color: var(--ghibli-brown); font-size: 16px; margin-bottom: 15px; 
            border-radius: 15px; outline: none; text-align: center;
        }

        .login-btn {
            width: 60px; height: 60px; margin: 10px auto 0; background: var(--ghibli-green);
            border-radius: 50%; display: flex; align-items: center; justify-content: center; 
            cursor: pointer; border: 2px solid var(--ghibli-brown); transition: 0.3s;
        }
        .login-btn:hover { transform: scale(1.1) rotate(10deg); }

        /* --- WEATHER WIDGET (STORYBOOK STYLE) --- */
        .weather-card {
            background: rgba(255, 255, 255, 0.7); border: 2px dashed var(--ghibli-brown);
            border-radius: 20px; padding: 15px; margin: 20px 0;
        }

        /* --- MAIN CONTENT --- */
        #main-content { opacity: 0; pointer-events: none; transition: 2s ease; height: 100vh; overflow-y: auto; }
        body.unlocked #main-content { opacity: 1; pointer-events: auto; }

        /* --- STORYTELLING ELEMENTS --- */
        .reveal-p { 
            opacity: 0; transform: translateY(20px); transition: 1.5s ease; 
            margin-bottom: 6rem; position: relative; padding: 20px;
            background: rgba(255,255,255,0.4); border-radius: 15px;
        }
        .reveal-p.active { opacity: 1; transform: translateY(0); }

        .pull-rope {
            position: absolute; right: -15px; top: 50%; width: 30px; height: 30px;
            background: url('https://cdn-icons-png.flaticon.com/512/1041/1041916.png'); /* Acorn icon */
            background-size: contain; cursor: pointer; animation: swing 2s infinite;
        }
        @keyframes swing { 0%, 100% { transform: rotate(-10deg); } 50% { transform: rotate(10deg); } }

        /* --- PHOTO AREA (GHIBLI STYLE) --- */
        #photo-container { 
            border: 8px solid white; border-bottom: 40px solid white; 
            transform: rotate(-2deg); box-shadow: 10px 10px 20px rgba(0,0,0,0.1);
            filter: brightness(0.1) sepia(1); transition: 2s;
        }
        #photo-container.lit { filter: brightness(1) sepia(0); }

        .firefly { 
            position: absolute; width: 5px; height: 5px; background: #fff176; 
            border-radius: 50%; filter: blur(1px); box-shadow: 0 0 10px #ffff00;
        }

        /* ORIGINAL ICON SYSTEM */
        .rain { position: fixed; background: rgba(100,150,255,0.4); width: 2px; height: 20px; z-index: -2; pointer-events: none; animation: fall linear infinite; }
        .flower { position: fixed; pointer-events: none; z-index: 1001; animation: bloomFade 3s forwards; }
        @keyframes bloomFade { 0% { transform: scale(0) rotate(0); opacity: 0; } 50% { opacity: 1; } 100% { transform: translateY(-100px) rotate(360deg); opacity: 0; } }
    </style>
</head>
<body>

    <div id="login-screen">
        <img src="https://assets.stickpng.com/images/584c30651fc21103bb375ea1.png" class="totoro-float" style="top:10%; left:10%;">
        <img src="https://assets.stickpng.com/images/584c305a1fc21103bb375ea0.png" class="totoro-float" style="bottom:10%; right:10%; animation-delay: 2s;">
        
        <div class="login-box">
            <h1>Welcome, Virya Rahmawati</h1>
            <p style="font-size: 14px; margin-bottom: 20px;">Silakan masuk ke dunia kita...</p>
            <input type="text" id="username" placeholder="Nama Kecilmu?">
            <input type="password" id="password" placeholder="Sandi Rahasia">
            <div class="login-btn" onclick="validateLogin()">
                <img src="https://cdn-icons-png.flaticon.com/512/826/826908.png" width="35"> </div>
        </div>
    </div>

    <div id="main-content">
        <div class="ghibli-bg"></div>
        <div id="rain-layer"></div>

        <div class="fixed top-5 left-5 z-[100] bg-white/70 px-4 py-2 rounded-full border-2 border-amber-900 shadow-sm">
            <span id="clock" class="text-lg font-bold">00:00:00</span>
        </div>

        <div class="fixed top-5 right-5 z-[100] flex flex-col items-center">
            <button class="w-12 h-12 bg-amber-100 rounded-full border-2 border-amber-900 shadow-md flex items-center justify-center" onclick="triggerLove(event)">
                ‚ù§Ô∏è
            </button>
            <div id="love-msg" class="text-xs font-bold mt-1 text-red-600 opacity-0 transition-opacity">Love You!</div>
        </div>

        <main class="max-w-[500px] mx-auto px-8 py-20 text-center">
            <header class="mb-10">
                <img src="https://www.pngplay.com/wp-content/uploads/12/My-Neighbor-Totoro-PNG-Clipart-Background.png" class="w-40 mx-auto mb-4">
                <p class="text-sm tracking-widest uppercase opacity-70">Sebuah Cerita Untukmu</p>
                <h1 class="f-serif text-4xl italic text-amber-900">Surat Kecil dari Hati</h1>
                
                <div class="weather-card">
                    <div class="flex justify-between items-center px-4">
                        <div class="text-left">
                            <p id="loc-text" class="text-xs uppercase">Hutan Totoro</p>
                            <p id="weather-desc" class="text-lg font-bold">Cerah Berawan</p>
                        </div>
                        <div class="text-4xl" id="main-temp">--¬∞</div>
                    </div>
                    <div class="flex overflow-x-auto gap-4 p-2 mt-2 scrollbar-hide" id="hourly-list"></div>
                </div>
            </header>

            <div class="relative mb-20">
                <div id="switch" class="absolute -right-5 top-1/2 z-20 cursor-pointer text-center" onclick="ignitePhoto()">
                    <div class="bg-yellow-400 p-2 rounded-full shadow-lg border-2 border-white">üïØÔ∏è</div>
                    <p class="text-[10px] font-bold mt-1">NYALAKAN</p>
                </div>
                <div id="photo-container" class="relative overflow-hidden bg-gray-800">
                    <img src="PXL_20250805_071541629.PORTRAITbb.jpg" class="w-full opacity-80">
                    <div id="fireflies-box" class="absolute inset-0 pointer-events-none"></div>
                </div>
            </div>

            <div class="text-left space-y-16">
                <p class="text-xl leading-relaxed reveal-p active">
                    "Dahulu kala, di sebuah sudut hati yang paling dalam..." <br><br>
                    Terima kasih banyak ya, sudah bersedia menerima hadiah kecil dariku. Aku tahu kehadirannya mungkin terasa mengagetkan, sampai-sampai kamu belum berani membukanya...
                    <span class="pull-rope" onclick="revealNext(this)"></span>
                </p>

                <p class="text-xl leading-relaxed reveal-p">
                    Namun ketahuilah, hijab itu kupilihkan dengan seluruh doa agar ia bisa menjagamu, sebagaimana aku ingin selalu menjagamu. Cobalah pakai mahkota indah itu, dandanlah yang cantik untukku.
                    <span class="pull-rope" onclick="revealNext(this)"></span>
                </p>

                <p class="text-2xl font-bold text-center py-10 border-y-2 border-dashed border-amber-900 reveal-p">
                    "Sebab bagiku, kamu bukan sekadar pilihan, melainkan sebuah ketetapan yang ingin aku syukuri seumur hidupku."
                    <span class="pull-rope" onclick="revealNext(this)"></span>
                </p>

                <p class="text-xl leading-relaxed reveal-p">
                    Aku ingin melihat bagaimana dunia menjadi lebih indah dalam satu bingkai foto darimu. Nanti, kirimkan fotonya padaku ya jika jilbabnya sudah kamu pakai. Biarkan aku menyimpan satu kenangan betapa sempurnanya kamu di sana.
                    <span class="pull-rope" onclick="revealNext(this)"></span>
                </p>

                <p class="text-xl leading-relaxed reveal-p">
                    Aku paham bahwa perjalanan kita mungkin tidak akan selalu lurus dan mudah. Namun bagiku, setiap lika-liku bersamamu adalah bagian dari cerita yang tak ingin aku lewatkan. Aku ingin menjadi rumah tempatmu pulang.
                </p>
            </div>

            <footer class="mt-32 pb-20">
                <div id="footer-weather" class="text-lg mb-1">--¬∞C | Sejuk</div>
                <div id="current-date" class="text-sm font-bold opacity-60 mb-4"></div>
                <p class="text-3xl text-amber-900">Himam Aby Maulana</p>
                <p class="text-[10px] mt-2 opacity-50">¬© 2026 Studio Virya Archive</p>
            </footer>
        </main>
    </div>

    <audio id="player" src="Ed Sheeran - Perfect.mp3" loop></audio>

    <script>
        // PRIVACY
        window.addEventListener('blur', () => document.body.classList.add('protected'));
        window.addEventListener('focus', () => document.body.classList.remove('protected'));

        async function validateLogin() {
            if (document.getElementById('password').value.toUpperCase() === "FLAFOUR") {
                document.body.classList.add('unlocked');
                setTimeout(() => {
                    document.getElementById('login-screen').style.transform = 'translateY(-100%)';
                    document.getElementById('player').play();
                    getWeather();
                    startGhibliEffects();
                }, 1000);
            }
        }

        function startGhibliEffects() {
            // Rain (Soot Sprites or Rain)
            setInterval(() => {
                const drop = document.createElement('div');
                drop.className = 'rain';
                drop.style.left = Math.random() * 100 + 'vw';
                drop.style.animationDuration = (Math.random() * 0.5 + 0.5) + 's';
                document.getElementById('rain-layer').appendChild(drop);
                setTimeout(() => drop.remove(), 1000);
            }, 100);
        }

        function revealNext(rope) {
            const current = rope.parentElement;
            const next = current.nextElementSibling;
            rope.style.display = 'none';
            if(next && next.classList.contains('reveal-p')) {
                next.classList.add('active');
                next.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        function ignitePhoto() {
            document.getElementById('switch').style.display = 'none';
            document.getElementById('photo-container').classList.add('lit');
            // Create Fireflies
            for(let i=0; i<20; i++) {
                const f = document.createElement('div');
                f.className = 'firefly';
                f.style.left = Math.random() * 100 + '%';
                f.style.top = Math.random() * 100 + '%';
                f.style.animation = `float ${Math.random()*3+2}s infinite ease-in-out`;
                document.getElementById('fireflies-box').appendChild(f);
            }
        }

        async function getWeather() {
            navigator.geolocation.getCurrentPosition(async (pos) => {
                const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&hourly=temperature_2m&current_weather=true&timezone=auto`);
                const data = await res.json();
                const temp = Math.round(data.current_weather.temperature);
                document.getElementById('main-temp').innerText = temp + '¬∞';
                document.getElementById('footer-weather').innerText = temp + '¬∞C | Udara Segar';
                document.getElementById('loc-text').innerText = "Lokasi Virya";
                
                let html = '';
                for(let i=0; i<12; i++) {
                    html += `<div class="text-center min-w-[50px]"><div class="text-[10px] opacity-60">${i*2}.00</div><div class="text-xs font-bold">${Math.round(data.hourly.temperature_2m[i*2])}¬∞</div></div>`;
                }
                document.getElementById('hourly-list').innerHTML = html;
            });
        }

        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString('en-GB');
            document.getElementById('current-date').innerText = new Date().toLocaleDateString('id-ID', {weekday:'long', day:'numeric', month:'long', year:'numeric'});
        }, 1000);

        function triggerLove(e) {
            const flowers = ['üå∏', 'üåº', 'üçÉ', 'üçÇ'];
            for(let i=0; i<8; i++) {
                const f = document.createElement('div');
                f.className = 'flower';
                f.innerText = flowers[Math.floor(Math.random()*flowers.length)];
                f.style.left = e.clientX + 'px';
                f.style.top = e.clientY + 'px';
                f.style.fontSize = Math.random() * 20 + 10 + 'px';
                document.body.appendChild(f);
                setTimeout(() => f.remove(), 3000);
            }
            const msg = document.getElementById('love-msg');
            msg.style.opacity = '1';
            setTimeout(() => msg.style.opacity = '0', 2000);
        }
    </script>
</body>
</html>
